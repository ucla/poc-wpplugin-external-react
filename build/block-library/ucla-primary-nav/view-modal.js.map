{"version":3,"file":"block-library/ucla-primary-nav/view-modal.js","mappings":"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","sources":["webpack://ucla-wcl-wpblocks/./node_modules/micromodal/dist/micromodal.es.js","webpack://ucla-wcl-wpblocks/webpack/bootstrap","webpack://ucla-wcl-wpblocks/webpack/runtime/make namespace object","webpack://ucla-wcl-wpblocks/./src/block-library/ucla-primary-nav/view-modal.js"],"sourcesContent":["function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if(\"string\"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var n,i,a,r,s,l=(n=[\"a[href]\",\"area[href]\",'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\"select:not([disabled]):not([aria-hidden])\",\"textarea:not([disabled]):not([aria-hidden])\",\"button:not([disabled]):not([aria-hidden])\",\"iframe\",\"object\",\"embed\",\"[contenteditable]\",'[tabindex]:not([tabindex^=\"-\"])'],i=function(){function o(e){var n=e.targetModal,i=e.triggers,a=void 0===i?[]:i,r=e.onShow,s=void 0===r?function(){}:r,l=e.onClose,c=void 0===l?function(){}:l,d=e.openTrigger,u=void 0===d?\"data-micromodal-trigger\":d,f=e.closeTrigger,h=void 0===f?\"data-micromodal-close\":f,v=e.openClass,g=void 0===v?\"is-open\":v,m=e.disableScroll,b=void 0!==m&&m,y=e.disableFocus,p=void 0!==y&&y,w=e.awaitCloseAnimation,E=void 0!==w&&w,k=e.awaitOpenAnimation,M=void 0!==k&&k,A=e.debugMode,C=void 0!==A&&A;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),this.modal=document.getElementById(n),this.config={debugMode:C,disableScroll:b,openTrigger:u,closeTrigger:h,openClass:g,onShow:s,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:M,disableFocus:p},a.length>0&&this.registerTriggers.apply(this,t(a)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var i,a,r;return i=o,(a=[{key:\"registerTriggers\",value:function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach((function(t){t.addEventListener(\"click\",(function(t){return e.showModal(t)}))}))}},{key:\"showModal\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute(\"aria-hidden\",\"false\"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour(\"disable\"),this.addEventListeners(),this.config.awaitOpenAnimation){var o=function t(){e.modal.removeEventListener(\"animationend\",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener(\"animationend\",o,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:\"closeModal\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute(\"aria-hidden\",\"true\"),this.removeEventListeners(),this.scrollBehaviour(\"enable\"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener(\"animationend\",(function e(){t.classList.remove(o),t.removeEventListener(\"animationend\",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:\"closeModalById\",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:\"scrollBehaviour\",value:function(e){if(this.config.disableScroll){var t=document.querySelector(\"body\");switch(e){case\"enable\":Object.assign(t.style,{overflow:\"\"});break;case\"disable\":Object.assign(t.style,{overflow:\"hidden\"})}}}},{key:\"addEventListeners\",value:function(){this.modal.addEventListener(\"touchstart\",this.onClick),this.modal.addEventListener(\"click\",this.onClick),document.addEventListener(\"keydown\",this.onKeydown)}},{key:\"removeEventListeners\",value:function(){this.modal.removeEventListener(\"touchstart\",this.onClick),this.modal.removeEventListener(\"click\",this.onClick),document.removeEventListener(\"keydown\",this.onKeydown)}},{key:\"onClick\",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:\"onKeydown\",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:\"getFocusableNodes\",value:function(){var e=this.modal.querySelectorAll(n);return Array.apply(void 0,t(e))}},{key:\"setFocusToFirstNode\",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:\"retainFocus\",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&e(i.prototype,a),r&&e(i,r),o}(),a=null,r=function(e){if(!document.getElementById(e))return console.warn(\"MicroModal: ❗Seems like you have missed %c'\".concat(e,\"'\"),\"background-color: #f8f9fa;color: #50596c;font-weight: bold;\",\"ID somewhere in your code. Refer example below to resolve it.\"),console.warn(\"%cExample:\",\"background-color: #f8f9fa;color: #50596c;font-weight: bold;\",'<div class=\"modal\" id=\"'.concat(e,'\"></div>')),!1},s=function(e,t){if(function(e){e.length<=0&&(console.warn(\"MicroModal: ❗Please specify at least one %c'micromodal-trigger'\",\"background-color: #f8f9fa;color: #50596c;font-weight: bold;\",\"data attribute.\"),console.warn(\"%cExample:\",\"background-color: #f8f9fa;color: #50596c;font-weight: bold;\",'<a href=\"#\" data-micromodal-trigger=\"my-modal\"></a>'))}(e),!t)return!0;for(var o in t)r(o);return!0},{init:function(e){var o=Object.assign({},{openTrigger:\"data-micromodal-trigger\"},e),n=t(document.querySelectorAll(\"[\".concat(o.openTrigger,\"]\"))),r=function(e,t){var o=[];return e.forEach((function(e){var n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)})),o}(n,o.openTrigger);if(!0!==o.debugMode||!1!==s(n,r))for(var l in r){var c=r[l];o.targetModal=l,o.triggers=t(c),a=new i(o)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===r(e)||(a&&a.removeEventListeners(),(a=new i(o)).showModal())},close:function(e){e?a.closeModalById(e):a.closeModal()}});\"undefined\"!=typeof window&&(window.MicroModal=l);export default l;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport MicroModal from 'micromodal';\n\n// Responsive navigation toggle.\nfunction navigationToggleModal( modal ) {\n\tconst dialogContainer = modal.querySelector(\n\t\t`.wp-block-navigation__responsive-dialog`\n\t);\n\n\tconst isHidden = 'true' === modal.getAttribute( 'aria-hidden' );\n\n\tmodal.classList.toggle( 'has-modal-open', ! isHidden );\n\tdialogContainer.toggleAttribute( 'aria-modal', ! isHidden );\n\n\tif ( isHidden ) {\n\t\tdialogContainer.removeAttribute( 'role' );\n\t\tdialogContainer.removeAttribute( 'aria-modal' );\n\t} else {\n\t\tdialogContainer.setAttribute( 'role', 'dialog' );\n\t\tdialogContainer.setAttribute( 'aria-modal', 'true' );\n\t}\n\n\t// Add a class to indicate the modal is open.\n\tconst htmlElement = document.documentElement;\n\thtmlElement.classList.toggle( 'has-modal-open' );\n}\n\nwindow.addEventListener( 'load', () => {\n\tMicroModal.init( {\n\t\tonShow: navigationToggleModal,\n\t\tonClose: navigationToggleModal,\n\t\topenClass: 'is-menu-open',\n\t} );\n\n\t// Close modal automatically on clicking anchor links inside modal.\n\tconst navigationLinks = document.querySelectorAll(\n\t\t'.wp-block-navigation-item__content'\n\t);\n\n\tnavigationLinks.forEach( function ( link ) {\n\t\t// Ignore non-anchor links and anchor links which open on a new tab.\n\t\tif (\n\t\t\t! link.getAttribute( 'href' )?.startsWith( '#' ) ||\n\t\t\tlink.attributes?.target === '_blank'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find the specific parent modal for this link\n\t\t// since .close() won't work without an ID if there are\n\t\t// multiple navigation menus in a post/page.\n\t\tconst modal = link.closest(\n\t\t\t'.wp-block-navigation__responsive-container'\n\t\t);\n\t\tconst modalId = modal?.getAttribute( 'id' );\n\n\t\tlink.addEventListener( 'click', () => {\n\t\t\t// check if modal exists and is open before trying to close it\n\t\t\t// otherwise Micromodal will toggle the `has-modal-open` class\n\t\t\t// on the html tag which prevents scrolling\n\t\t\tif ( modalId && modal.classList.contains( 'has-modal-open' ) ) {\n\t\t\t\tMicroModal.close( modalId );\n\t\t\t}\n\t\t} );\n\t} );\n} );\n"],"names":["MicroModal","navigationToggleModal","modal","dialogContainer","querySelector","isHidden","getAttribute","classList","toggle","toggleAttribute","removeAttribute","setAttribute","htmlElement","document","documentElement","window","addEventListener","init","onShow","onClose","openClass","navigationLinks","querySelectorAll","forEach","link","startsWith","attributes","target","closest","modalId","contains","close"],"sourceRoot":""}